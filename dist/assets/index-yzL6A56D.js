(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();const d=document.getElementById("destination"),I=document.getElementById("search");document.getElementById("clear");I.addEventListener("click",r=>{let n=d.value;w(n)});d.addEventListener("keydown",r=>{if(r.key==="Enter"){let n=d.value;w(n)}});async function w(r){try{const n=B(r),o=P(r),a=T(r);return await Promise.all(n,o,a)}catch(n){console.log("error",n)}}async function P(r){const n=document.getElementById("weather"),o=document.createElement("div");n.appendChild(o),o.innerHTML="";try{const{lat:a,lng:e}=await E(r),t=await L(a,e),i=t.main.temp||"no information available",c=t.weather[0]?.description||"no information available",s=t.weather[0]?.icon||".img/weather-icon.png",l=t.main.feels_like||"no information available",$=t.main.humidity||"no information available",b=t.wind.speed||"no information available",v=t.rain?.["1h"]||0,p=document.createElement("p");p.innerText=`Temperature: ${i}`;const m=document.createElement("p");m.innerText=`Weather desciption: ${c}`;const x=document.createElement("img");x.src=s?`https://openweathermap.org/img/wn/${s}.png`:"./img/weather-icon.png";const h=document.createElement("p");h.innerText=`Feels like: ${l}`;const u=document.createElement("p");u.innerText=`Humidity: ${$}`;const f=document.createElement("p");f.innerText=`Wind Speed: ${b}`;const g=document.createElement("p");g.innerText=`Precipitation: ${v}`;const y=document.createElement("h2");y.innerText=`The Weather in ${r} today: `,n.appendChild(y),o.appendChild(p),o.appendChild(m),o.appendChild(h),o.appendChild(u),o.appendChild(f),o.appendChild(g)}catch{console.log("Error")}finally{console.log("complete")}}async function T(r){const n=document.getElementById("attractions");n.innerHTML="";try{const{lat:o,lng:a}=await E(r),e=await C(o,a),t=document.createElement("h2");t.innerText=`Points of Interest in ${r}:`,n.appendChild(t);const i=document.createElement("div");n.appendChild(i);for(const c of e.features)if(c.properties&&c.properties.formatted){const s=document.createElement("div");s.innerHTML=`
        <h3>${c.properties.formatted}
        <span><a href="${c.website||`https://en.wikipedia.org/wiki/${encodeURIComponent(c.properties.name)}`}" target="_blank">Visit website</a></span></h3>
        `,i.appendChild(s);const l=document.getElementById("articleflex");l.style.display="flex"}console.log(e)}catch(o){console.log("error",o)}}async function C(r,n){const a=`https://api.geoapify.com/v2/places?categories=tourism&limit=10&apiKey=6adab50e4f9f4421aabb4643494054aa&lat=${r}&lon=${n}&units=metric`;try{const e=await fetch(a);return e.ok||console.log("didnt fetch"),e.json()}catch(e){console.log("error",e)}}async function L(r,n){const a=`https://api.openweathermap.org/data/2.5/weather?lat=${r}&lon=${n}&appid=489f8ddbcbcd19b1065160145197ac03`;try{const e=await fetch(a);return e.ok||console.log("didnt fetch"),e.json()}catch(e){console.log("error",e)}}async function E(r){const o=`https://api.opencagedata.com/geocode/v1/json?q=${r}&key=c9f4cfde86a74b3f81f496ef85c52936`;try{const a=await fetch(o);if(!a.ok)throw new Error("didnt fetch");const e=await a.json(),{lat:t,lng:i}=e.results[0].geometry;return{lat:t,lng:i}}catch(a){console.log("error",a)}}async function B(r){const n="z4Uya3d1JQCDBHUIO06mvA5bh1YrWExKwY65AMJx1eU3dL96bSPu9d0a",o=r,a=document.getElementById("imgs"),e=`https://api.pexels.com/v1/search?query=${o}&per_page=3`;try{const i=await(await fetch(e,{headers:{Authorization:n}})).json();a.innerHTML=i.photos.map(c=>`<img src="${c.src.medium}" alt="${c.alt}">`).join(""),a.style.display="flex"}catch(t){console.error("Error fetching images:",t)}}
