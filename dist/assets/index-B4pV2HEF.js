(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=a(e);fetch(e.href,n)}})();const l=document.getElementById("destination"),v=document.getElementById("search");document.getElementById("clear");v.addEventListener("click",o=>{let t=l.value;w(t)});l.addEventListener("keydown",o=>{if(o.key==="Enter"){let t=l.value;w(t)}});async function w(o){try{const t=C(o),a=I(o),r=P(o);return await Promise.all(t,a,r)}catch(t){console.log("error",t)}}async function I(o){const t=document.getElementById("weather");t.innerHTML="";try{const{lat:a,lng:r}=await E(o),e=await L(a,r),n=e.main.temp||"no information available",i=e.weather[0]?.description||"no information available",c=e.weather[0]?.icon||".img/weather-icon.png",s=e.main.feels_like||"no information available",$=e.main.humidity||"no information available",b=e.wind.speed||"no information available",x=e.rain?.["1h"]||0,p=document.createElement("p");p.innerText=`Temperature: ${n}`;const d=document.createElement("p");d.innerText=`Weather desciption: ${i}`;const m=document.createElement("img");m.src=c?`https://openweathermap.org/img/wn/${c}.png`:"./img/weather-icon.png";const h=document.createElement("p");h.innerText=`Feels like: ${s}`;const f=document.createElement("p");f.innerText=`Humidity: ${$}`;const u=document.createElement("p");u.innerText=`Wind Speed: ${b}`;const g=document.createElement("p");g.innerText=`Precipitation: ${x}`;const y=document.createElement("h2");y.innerText=`The Weather in ${o} today:`,t.appendChild(y),t.appendChild(p),t.appendChild(d),t.appendChild(m),t.appendChild(h),t.appendChild(f),t.appendChild(u),t.appendChild(g)}catch{console.log("Error")}finally{console.log("complete")}}async function P(o){const t=document.getElementById("attractions");t.innerHTML="";try{const{lat:a,lng:r}=await E(o),e=await T(a,r),n=document.createElement("h2");n.innerText=`Points of Interest in ${o}`,t.appendChild(n);for(const i of e.features)if(i.properties&&i.properties.formatted){const c=document.createElement("div");c.innerHTML=`
        <h3>${i.properties.formatted}</h3>
        <p><a href="${i.website||`https://en.wikipedia.org/wiki/${encodeURIComponent(i.properties.name)}`}" target="_blank">Visit website</a></p>
        <hr>
        `,t.appendChild(c);const s=document.getElementById("articleflex");s.style.display="flex"}console.log(e)}catch(a){console.log("error",a)}}async function T(o,t){const r=`https://api.geoapify.com/v2/places?categories=tourism&limit=10&apiKey=6adab50e4f9f4421aabb4643494054aa&lat=${o}&lon=${t}&units=metric`;try{const e=await fetch(r);return e.ok||console.log("didnt fetch"),e.json()}catch(e){console.log("error",e)}}async function L(o,t){const r=`https://api.openweathermap.org/data/2.5/weather?lat=${o}&lon=${t}&appid=489f8ddbcbcd19b1065160145197ac03`;try{const e=await fetch(r);return e.ok||console.log("didnt fetch"),e.json()}catch(e){console.log("error",e)}}async function E(o){const a=`https://api.opencagedata.com/geocode/v1/json?q=${o}&key=c9f4cfde86a74b3f81f496ef85c52936`;try{const r=await fetch(a);if(!r.ok)throw new Error("didnt fetch");const e=await r.json(),{lat:n,lng:i}=e.results[0].geometry;return{lat:n,lng:i}}catch(r){console.log("error",r)}}async function C(o){const t="z4Uya3d1JQCDBHUIO06mvA5bh1YrWExKwY65AMJx1eU3dL96bSPu9d0a",a=o,r=document.getElementById("imgs"),e=`https://api.pexels.com/v1/search?query=${a}&per_page=3`;try{const i=await(await fetch(e,{headers:{Authorization:t}})).json();r.innerHTML=i.photos.map(c=>`<img src="${c.src.medium}" alt="${c.alt}">`).join(""),r.style.display="flex"}catch(n){console.error("Error fetching images:",n)}}
