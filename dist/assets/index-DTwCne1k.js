(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=a(e);fetch(e.href,t)}})();const s=document.getElementById("destination"),I=document.getElementById("search");document.getElementById("clear");I.addEventListener("click",o=>{let n=s.value;g(n)});s.addEventListener("keydown",o=>{if(o.key==="Enter"){let n=s.value;g(n)}});async function g(o){try{const n=v(o),a=P(o),r=T(o);return await Promise.all(n,a,r)}catch(n){console.log("error",n)}}async function P(o){const a=`https://api.weatherstack.com/current?access_key=3463a3654ba01dfc7b98e056105b25bd&query=${o}`,r=document.getElementById("weather");r.innerHTML="";try{const e=await fetch(a);if(!e.ok)throw new Error("Failed to fetch");const t=await e.json();if(t.current){const c=t.current.temperature,i=t.current.weather_descriptions,w=t.current.weather_icons,E=t.current.feelslike,$=t.current.humidity,b=t.current.wind_speed,x=t.current.precip,p=document.createElement("p");p.innerText=`Temperature: ${c}`;const d=document.createElement("p");d.innerText=`Weather desciption: ${i}`;const l=document.createElement("img");l.src=w;const u=document.createElement("p");u.innerText=`Feels like: ${E}`;const h=document.createElement("p");h.innerText=`Humidity: ${$}`;const m=document.createElement("p");m.innerText=`Wind Speed: ${b}`;const f=document.createElement("p");f.innerText=`Precipitation: ${x}`;const y=document.createElement("h2");y.innerText=`The Weather in ${o} today:`,r.appendChild(y),r.appendChild(p),r.appendChild(d),r.appendChild(l),r.appendChild(u),r.appendChild(h),r.appendChild(m),r.appendChild(f)}else r.textContent="Nope"}catch{console.log("Error")}finally{console.log("complete")}}async function T(o){const n=document.getElementById("attractions");n.innerHTML="";try{const{lat:a,lng:r}=await L(o),e=await C(a,r),t=document.createElement("h2");t.innerText=`Points of Interest in ${o}`,n.appendChild(t);for(const c of e.features)if(c.properties&&c.properties.formatted){const i=document.createElement("div");i.innerHTML=`
        <h3>${c.properties.formatted}</h3>
        <p><a href="${c.website||`https://en.wikipedia.org/wiki/${encodeURIComponent(c.properties.name)}`}" target="_blank">Visit website</a></p>
        <hr>
        `,n.appendChild(i)}console.log(e)}catch(a){console.log("error",a)}}async function C(o,n){const r=`https://api.geoapify.com/v2/places?categories=tourism&limit=10&apiKey=6adab50e4f9f4421aabb4643494054aa&lat=${o}&lon=${n}`;try{const e=await fetch(r);return e.ok||console.log("didnt fetch"),e.json()}catch(e){console.log("error",e)}}async function L(o){const a=`https://api.opencagedata.com/geocode/v1/json?q=${o}&key=c9f4cfde86a74b3f81f496ef85c52936`;try{const r=await fetch(a);if(!r.ok)throw new Error("didnt fetch");const e=await r.json(),{lat:t,lng:c}=e.results[0].geometry;return{lat:t,lng:c}}catch(r){console.log("error",r)}}async function v(o){const n="z4Uya3d1JQCDBHUIO06mvA5bh1YrWExKwY65AMJx1eU3dL96bSPu9d0a",a=o,r=document.getElementById("imgs"),e=`https://api.pexels.com/v1/search?query=${a}&per_page=3`;try{const c=await(await fetch(e,{headers:{Authorization:n}})).json();r.innerHTML=c.photos.map(i=>`<img src="${i.src.medium}" alt="${i.alt}">`).join("")}catch(t){console.error("Error fetching images:",t)}}
